{"version":3,"sources":["shared/components/AuthBox.js","authPages/LoginPage/LoginPageHeader.js","shared/components/InputWithLabel.js","authPages/LoginPage/LoginPageInputs.js","shared/components/CustomPrimaryButton.js","shared/components/RedirectInfo.js","authPages/LoginPage/LoginPageFooter.js","shared/utils/validators.js","shared/utils/auth.js","api.js","store/actions/alertActions.js","store/actions/authActions.js","authPages/LoginPage/LoginPage.js","authPages/RegisterPage/RegisterPageInputs.js","authPages/RegisterPage/RegisterFooter.js","authPages/RegisterPage/RegisterPage.js","Dashboard/SideBar/MainPageButton.js","store/reducers/authReducer.js","store/reducers/alertReducer.js","store/actions/friendsActions.js","store/reducers/friendsReducer.js","store/actions/chatActions.js","store/reducers/chatReducer.js","store/actions/roomActions.js","store/reducers/roomReducer.js","store/store.js","shared/utils/chat.js","realtimeCommunication/webRTCHandler.js","realtimeCommunication/socketConnection.js","realtimeCommunication/roomHandler.js","Dashboard/SideBar/CreateRoomButton.js","shared/components/Avatar.js","Dashboard/SideBar/ActiveRoomButton.js","Dashboard/SideBar/SideBar.js","Dashboard/FriendsSideBar/AddFriendDialog.js","Dashboard/FriendsSideBar/AddFriendButton.js","Dashboard/FriendsSideBar/FriendsTitle.js","Dashboard/FriendsSideBar/FriendsList/OnlineIndicator.js","Dashboard/FriendsSideBar/FriendsList/FriendListItem.js","Dashboard/FriendsSideBar/FriendsList/FriendsList.js","Dashboard/FriendsSideBar/PendingInvitationList/InvitationDecisionButtons.js","Dashboard/FriendsSideBar/PendingInvitationList/PendingInvitationListItem.js","Dashboard/FriendsSideBar/PendingInvitationList/PendingInvitationList.js","Dashboard/FriendsSideBar/FriendsSideBar.js","Dashboard/Messenger/WelcomeMessage.js","Dashboard/Messenger/Messages/MessagesHeader.js","Dashboard/Messenger/Messages/Message.js","Dashboard/Messenger/Messages/DateSeparator.js","Dashboard/Messenger/Messages/Messages.js","Dashboard/Messenger/NewMessageInput.js","Dashboard/Messenger/MessengerContent.js","Dashboard/Messenger/Messenger.js","Dashboard/AppBar/DropdownMenu.js","Dashboard/AppBar/ChosenOptionLabel.js","Dashboard/AppBar/AppBar.js","Dashboard/Room/ResizeRoomButton.js","Dashboard/Room/Video.js","Dashboard/Room/VideosContainer.js","Dashboard/Room/RoomButtons/CameraButton.js","Dashboard/Room/RoomButtons/MicButton.js","Dashboard/Room/RoomButtons/ScreenShareButton.js","Dashboard/Room/RoomButtons/CloseRoomButton.js","Dashboard/Room/RoomButtons/RoomButtons.js","Dashboard/Room/Room.js","Dashboard/Dashboard.js","shared/components/AlertNotification.js","App.js","index.js"],"names":["BoxWrapper","styled","width","height","display","alignItems","justifyContent","background","AuthBox","props","additionalStyles","Box","sx","bgcolor","borderRadius","boxShadow","flexDirection","padding","userSelect","style","children","LoginPageHeader","Typography","variant","color","textAlign","fontWeight","Wrapper","margin","Label","textTransform","fontSize","Input","flexGrow","border","letterSpacing","borderColor","outline","InputWithLabel","value","setValue","label","type","placeholder","onChange","event","target","spellCheck","LoginPageInputs","mail","setMail","password","setPassword","CustomPrimaryButton","disabled","onClick","Button","RedirectText","cursor","RedirectInfo","text","redirectText","redirectHandler","LoginPageFooter","handleLogin","isFormValid","history","useHistory","Tooltip","title","marginTop","push","validatePassword","length","validateMail","test","validateUsername","username","logout","localStorage","clear","window","location","pathname","apiClient","axios","create","baseURL","timeout","interceptors","request","use","config","userDetails","getItem","token","JSON","parse","headers","Authorization","err","Promise","reject","login","data","a","post","error","exception","register","sendFriendInvitation","checkResponseCode","acceptFriendInvitation","rejectFriendInvitation","responseCode","response","status","alertActions","OPEN_ALERT_MESSAGE","CLOSE_ALERT_MESSAGE","openAlertMessage","content","closeAlertMessage","authActions","getActions","dispatch","setUserDetails","api","console","log","setItem","stringify","connect","useState","setIsFormValid","useEffect","isMailValid","isPasswordValid","validateLoginForm","RegisterPageInputs","setUsername","RegisterPageFooter","handleRegister","validateRegisterForm","marginBottom","MainPageButton","minWidth","backgroundColor","initState","reducer","state","action","showAlertMessage","alertMessageContent","friendsActions","closeDialogHandler","initstate","friends","pendingFriendsInvitations","onlineUsers","chatTypes","chatActions","setChosenChatDetails","chatDetails","chatType","chosenChatDetails","messages","roomActions","OPEN_ROOM","SET_ROOM_DETAILS","SET_ACTIVE_ROOMS","SET_LOCAL_STREAM","SET_REMOTE_STREAMS","SET_AUDIO_ONLY","SET_SCREEN_SHARE_STREAM","SET_IS_USER_JOINED_WITH_ONLY_AUDIO","setAudioOnly","audioOnly","setScreenSharingStream","stream","setOpenRoom","isUserRoomCreator","isUserInRoom","setRoomDetails","roomDetails","setLocalStream","localStream","setRemoteStreams","remoteStreams","isScreenSharingActive","screenSharingStream","setIsUserJoinedWithOnlyAudio","onlyWithAudio","isUserJoinedWithOnlyAudio","activeRooms","SET_USER_JOINED_WITH_ONLY_AUDIO","rootReducer","combineReducers","auth","authReducer","alert","alertReducer","friendsReducer","chat","chatReducer","room","roomReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","updateChatHistoryIfSameConversationActive","participants","usersInConversation","every","participantId","includes","setMessages","onlyAudioConstraints","audio","video","defaultConstraints","peers","getLocalStreamPreview","onlyAudio","callbackFunc","constraints","navigator","mediaDevices","getUserMedia","then","catch","prepareNewPeerConnection","connUserSocketId","isInitiator","getState","Peer","initiator","iceServers","urls","on","socketConnection","signal","remoteStream","addNewRemoteStream","newRemoteStreams","switchOutgoingTracks","socket_id","index","streams","getTracks","index2","kind","replaceTrack","socket","connectWithSocketServer","jwtToken","io","id","pendingInvitations","setFriends","setOnlineUsers","recieverId","userId","_id","updateDirectChatHistoryIfActive","roomHandler","webRTCHandler","emit","destroy","filter","signalPeerData","createNewRoom","newRoomCreated","updateActiveRooms","rooms","forEach","roomCreator","creatorUsername","f","setActiveRooms","joinRoom","roomId","leaveRoom","localSream","track","stop","Object","entries","mappedObject","CreateRoomButton","AvatarPreview","Avatar","large","substring","ActiveRoomButton","amountOfParticipants","activeRoomButtonDisabled","roomTite","MainContainer","overflowY","map","isDialogOpen","handleCloseDialog","Dialog","open","onClose","DialogTitle","DialogContent","DialogContentText","DialogActions","targetMailAddress","marginLeft","marginRight","AddFriendButton","setIsDialogOpen","FriendsTitle","OnlineIndicator","position","right","details","isOnline","name","align","overflow","checkOnlineUsers","isUserOnline","find","user","InvitationDecisionButtons","acceptInvitationHandler","rejectInvitationHandler","IconButton","buttonDisabled","setButtonDisabled","invitation","senderId","UsernameLabel","WelcomeMessage","MessagesHeader","AvatarContainer","MessageContainer","MessageContent","wordBreak","SameAuthorMessageContent","SameAuthorMessageText","userNameStyle","sameAuthor","date","sameDay","Separator","DateLabel","top","left","DateSeparator","convertDateToHumanReadable","format","mm","getMonth","dd","getDate","yy","getFullYear","toString","slice","yyyy","replace","matched","messageEndRef","useRef","current","scrollIntoView","behavior","message","author","Date","ref","setMessage","handleSendMessage","receiverUserId","onKeyDown","key","MessengerContent","React","anchorEl","setAnchorEl","Boolean","currentTarget","Menu","MenuListProps","MenuItem","borderBottom","AppBar","DropdownMenu","bottom","ResizeRoomButton","isRoomMinimized","handleRoomResize","VideoEl","Video","isLocalStream","videoRef","srcObject","onloadedmetadata","play","autoPlay","muted","flexWrap","CameraButton","cameraEnabled","setCameraEnabled","getVideoTracks","enabled","MicButton","micEnabled","setMicEnabled","getAudioTracks","ScreenShareButton","handleScreenShareToggle","getDisplayMedia","CloseRoomButton","borderTopLeftRadius","borderTopRightRadius","fullScreenRoomStyle","minimizedRoomStyle","Room","setIsRoomMinimized","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","Alert","severity","App","exact","path","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eebfba1c.chunk.js","sourcesContent":["import React from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport { styled } from '@mui/system';\r\n\r\nconst BoxWrapper = styled('div')({\r\n  width: '100%',\r\n  height: '100vh',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  background: \"url('/images/login_bg.svg')\",\r\n})\r\n\r\nconst AuthBox = (props) => {\r\n  const { additionalStyles } = props;\r\n  return (\r\n    <BoxWrapper>\r\n      <Box\r\n        sx = {{\r\n          width: 500,\r\n          height: 400,\r\n          bgcolor: '#36393f',\r\n          borderRadius: '5px',\r\n          boxShadow: '0 2px 10px 0 rgb(0 0 0 / 0.5)',\r\n          flexDirection: 'column',\r\n          padding: '30px',\r\n          userSelect: 'none',\r\n        }}\r\n        style={additionalStyles ? additionalStyles : {}}\r\n      >\r\n        {props.children}\r\n      </Box>\r\n    </BoxWrapper>\r\n  )\r\n}\r\n\r\nexport default AuthBox;","import React from 'react';\r\nimport { Typography } from '@mui/material';\r\n\r\nconst LoginPageHeader = () => {\r\n  return (\r\n    <>\r\n    <Typography \r\n      variant='h5' \r\n      sx={{ \r\n        color: 'white', \r\n        textAlign:\"center\", \r\n        fontWeight: \"bold\",  \r\n      }}>\r\n      Welcome back!\r\n    </Typography>\r\n    <Typography \r\n      sx={{ \r\n        color:'#b9bbbe', \r\n        textAlign:\"center\", \r\n        fontWeight: \"500\",\r\n        }}>\r\n      We're so excited to see you again!\r\n    </Typography>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LoginPageHeader;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\n\r\nconst Wrapper = styled('div')({\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  flexDirection: 'column',\r\n  width: '100%',\r\n  margin: '10px 0',\r\n});\r\n\r\nconst Label = styled('div')({\r\n  color: '#b9bbbe',\r\n  textTransform: 'uppercase',\r\n  fontWeight: '600',\r\n  fontSize: '12px',\r\n  margin: '8px 0',\r\n});\r\n\r\nconst Input = styled('input')({\r\n  flexGrow: 1,\r\n  height: '40px',\r\n  border: '1px solid black',\r\n  borderRadius: '3px',\r\n  color: '#dcddde',\r\n  background: '#303239',\r\n  margin: 0,\r\n  fontSize: '16px',\r\n  padding: '0 10px',\r\n  letterSpacing: '0.5px',\r\n  borderColor: '#222222',\r\n  '&:hover': {\r\n    borderColor: '#050505',\r\n  },\r\n  '&:focus': {\r\n    outline: 'none',\r\n    borderColor: '#0da6e8',\r\n  },\r\n});\r\n\r\nconst InputWithLabel = (props) => {\r\n  const { value, setValue, label, type, placeholder } = props;\r\n\r\n  const handleValueChange = (event) => {\r\n    setValue(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Label>{label}</Label>\r\n      <Input \r\n      value={value}\r\n      onChange={handleValueChange}\r\n      type={type}\r\n      placeholder={placeholder}\r\n      spellCheck='false'\r\n      />\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default InputWithLabel;","import React from 'react';\r\nimport InputWithLabel from '../../shared/components/InputWithLabel';\r\n\r\nconst LoginPageInputs = ({ mail, setMail, password, setPassword }) => {\r\n  return (\r\n    <>\r\n      <InputWithLabel \r\n      value={mail}\r\n      setValue={setMail}\r\n      label='Email'\r\n      type='text'\r\n      />\r\n      <InputWithLabel \r\n      value={password}\r\n      setValue={setPassword}\r\n      label='Password'\r\n      type='password'\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LoginPageInputs;","import React from 'react';\r\nimport Button from '@mui/material/Button';\r\n\r\nconst CustomPrimaryButton = ({\r\n  label, additionalStyles, disabled, onClick,\r\n}) => {\r\n  return (\r\n    <Button\r\n      variant='contained'\r\n      sx={{\r\n        bgcolor: '#5865F2',\r\n        color: 'white',\r\n        textTransform: 'none',\r\n        fontSize: '15px',\r\n        fontWeight: '500',\r\n        width: '100%',\r\n        height: '40px',\r\n        '&:disabled': {\r\n          bgcolor: \"#5865F2\",\r\n        color: \"white\",\r\n        }\r\n      }}\r\n      style={additionalStyles ? additionalStyles : {}}\r\n      disabled={disabled}\r\n      onClick={onClick}\r\n    >\r\n      {label}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default CustomPrimaryButton","import React from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { styled } from '@mui/system';\r\n\r\nconst RedirectText = styled('span')({\r\n  color: '#00AFF4',\r\n  fontWeight: 500,\r\n  cursor: 'pointer',\r\n});\r\n\r\nconst RedirectInfo = ({\r\n  text,\r\n  redirectText,\r\n  additionalStyles,\r\n  redirectHandler,\r\n}) => {\r\n  return <Typography\r\n  sx = {{color:\"#72767d\"}}\r\n  style={additionalStyles ? additionalStyles : {}}\r\n  variant=\"subtitle2\"\r\n  >\r\n    {text}\r\n    <RedirectText onClick={redirectHandler}>{redirectText}</RedirectText>\r\n  </Typography>;\r\n};\r\n\r\nexport default RedirectInfo;\r\n","import React from 'react';\r\nimport CustomPrimaryButton from '../../shared/components/CustomPrimaryButton';\r\nimport RedirectInfo from '../../shared/components/RedirectInfo';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Tooltip } from '@mui/material';\r\n\r\nconst getFormNotValidMessage = () => {\r\n  return 'Enter correct e-mail and password should contains between 6 to 12 characters';\r\n}\r\n\r\nconst getFormValidMessage = () => {\r\n  return 'Press  to log in';\r\n}\r\n\r\nconst LoginPageFooter = ({handleLogin, isFormValid}) => {\r\n  const history = useHistory();\r\n\r\n  const handlePushToRegisterPage = () => {\r\n    history.push(\"/register\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Tooltip\r\n    title={!isFormValid ? getFormNotValidMessage() : getFormValidMessage()}\r\n    >\r\n      <div>\r\n        <CustomPrimaryButton\r\n          label=\"Login\"\r\n          additionalStyles={{ marginTop: '40px' }}\r\n          disabled={!isFormValid}\r\n          onClick={handleLogin}\r\n        />\r\n      </div>\r\n      </Tooltip>\r\n      <RedirectInfo \r\n      text='Need a account? '\r\n      redirectText='Create an account'\r\n      additionalStyles={{ marginTop: '5px' }}\r\n      redirectHandler={handlePushToRegisterPage}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LoginPageFooter;","export const validateLoginForm = ({ mail, password}) => {\r\n  const isMailValid = validateMail(mail);\r\n  const isPasswordValid = validatePassword(password);\r\n  return isMailValid && isPasswordValid;\r\n}\r\n\r\n\r\nexport const validateRegisterForm = ({ mail, username, password}) => {\r\n  return validateMail(mail) && validateUsername(username) && validatePassword(password);\r\n}\r\n\r\nconst validatePassword = (password) => {\r\n  return password.length >= 6 && password.length <= 12;\r\n}\r\n\r\nexport const validateMail = (mail) => {\r\n  const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\r\n  return emailPattern.test(mail);\r\n}\r\n\r\nconst validateUsername = (username) => {\r\n  return username.length >= 3 && username.length <= 12;\r\n}","export const logout = () => {\r\n  localStorage.clear();\r\n  window.location.pathname = '/login';\r\n};","import axios from 'axios';\r\nimport { logout } from './shared/utils/auth';\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: 'https://discord-backend-arpit.herokuapp.com/api',\r\n  timeout: 10000\r\n});\r\n\r\napiClient.interceptors.request.use((config)=> {\r\n  const userDetails = localStorage.getItem('user');\r\n\r\n  if(userDetails) {\r\n    const token = JSON.parse(userDetails).token;\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n\r\n  return config;\r\n}, (err) => {\r\n  return Promise.reject(err);\r\n});\r\n\r\n// public routes\r\n\r\nexport const login = async (data) => {\r\n  try{\r\n    return await apiClient.post('/auth/login', data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    }\r\n  }\r\n};\r\n\r\nexport const register = async (data) => {\r\n  try{\r\n    return await apiClient.post('/auth/register', data);\r\n  } catch (exception) {\r\n    return {\r\n      error: true,\r\n      exception,\r\n    }\r\n  }\r\n};\r\n\r\n\r\n// secure routes\r\nexport const sendFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post('/friend-invitation/invite', data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    }\r\n  }\r\n};\r\n\r\nexport const acceptFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post('/friend-invitation/accept', data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    }\r\n  }\r\n};\r\n\r\nexport const rejectFriendInvitation = async (data) => {\r\n  try {\r\n    return await apiClient.post('/friend-invitation/reject', data);\r\n  } catch (exception) {\r\n    checkResponseCode(exception);\r\n    return {\r\n      error: true,\r\n      exception,\r\n    }\r\n  }\r\n};\r\n\r\n\r\nconst checkResponseCode = (exception) => {\r\n  const responseCode = exception?.response?.status;\r\n\r\n  if(responseCode) {\r\n    (responseCode === 401 || responseCode === 403) && logout();\r\n  }\r\n}","const alertActions = {\r\n  OPEN_ALERT_MESSAGE: \"ALERT.OPEN_ALERT_MESSAGE\",\r\n  CLOSE_ALERT_MESSAGE: \"ALERT.CLOSE_ALERT_MESSAGE\"\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    openAlertMessage: (content) => dispatch(openAlertMessage(content)),\r\n    closeAlertMessage: (content) => dispatch(closeAlertMessage(content)),\r\n  };\r\n};\r\n\r\nexport const openAlertMessage = (content) => {\r\n  return {\r\n    type: alertActions.OPEN_ALERT_MESSAGE,\r\n    content\r\n  };\r\n};\r\n\r\nexport const closeAlertMessage = (content) => {\r\n  return {\r\n    type: alertActions.CLOSE_ALERT_MESSAGE,\r\n    content\r\n  };\r\n};\r\n\r\nexport default alertActions;","import * as api from '../../api';\r\nimport { openAlertMessage } from './alertActions';\r\n\r\nexport const authActions = {\r\n  SET_USER_DETAILS: 'AUTH.SET_USER_DETAILS',\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    login: (userDetails, history) => {\r\n      dispatch(login(userDetails, history));\r\n    },\r\n    register: (userDetails, history) => {\r\n      dispatch(register(userDetails, history));\r\n    },\r\n    setUserDetails: (userDetails) => {\r\n      dispatch(setUserDetails(userDetails));\r\n    }\r\n  }\r\n};\r\n\r\nconst setUserDetails = (userDetails) => {\r\n  return {\r\n    type: authActions.SET_USER_DETAILS,\r\n    userDetails\r\n  }\r\n};\r\n\r\nconst login = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.login(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem('user', JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push('/dashboard');\r\n    }\r\n  }\r\n}\r\n\r\nconst register = (userDetails, history) => {\r\n  return async (dispatch) => {\r\n    const response = await api.register(userDetails);\r\n    console.log(response);\r\n    if (response.error) {\r\n      dispatch(openAlertMessage(response?.exception?.response?.data));\r\n    } else {\r\n      const { userDetails } = response?.data;\r\n      localStorage.setItem('user', JSON.stringify(userDetails));\r\n\r\n      dispatch(setUserDetails(userDetails));\r\n      history.push('/dashboard');\r\n    }\r\n  }\r\n}","import React, { useState, useEffect } from 'react';\r\nimport AuthBox from '../../shared/components/AuthBox'\r\nimport LoginPageHeader from './LoginPageHeader';\r\nimport LoginPageInputs from './LoginPageInputs';\r\nimport LoginPageFooter from './LoginPageFooter';\r\nimport { validateLoginForm } from '../../shared/utils/validators';\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/authActions\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst LoginPage = ({ login }) => {\r\n  const history = useHistory();\r\n\r\n  const [mail, setMail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(validateLoginForm({ mail, password }));\r\n  }, [mail, password, setIsFormValid]);\r\n\r\n  const handleLogin = () => {\r\n    const userDetails = {\r\n      mail,\r\n      password\r\n    };\r\n    console.log(userDetails);\r\n    login(userDetails, history);\r\n  };\r\n\r\n  return (\r\n    <AuthBox>\r\n      <LoginPageHeader />\r\n      <LoginPageInputs \r\n      mail={mail}\r\n      setMail={setMail}\r\n      password={password}\r\n      setPassword={setPassword}\r\n      />\r\n      <LoginPageFooter \r\n        isFormValid={isFormValid}\r\n        handleLogin={handleLogin}\r\n      />\r\n    </AuthBox>\r\n  )\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n}\r\n\r\nexport default connect(null, mapActionsToProps)(LoginPage);","import React from 'react';\r\nimport InputWithLabel from '../../shared/components/InputWithLabel';\r\n\r\nconst RegisterPageInputs = (props) => {\r\n  const { mail, username, password, setMail, setUsername, setPassword } = props;\r\n\r\n  return (\r\n    <>\r\n    <InputWithLabel\r\n    value={mail}\r\n    setValue={setMail}\r\n    label=\"Email address\"\r\n    type=\"text\"\r\n    />\r\n    <InputWithLabel\r\n    value={username}\r\n    setValue={setUsername}\r\n    label=\"Username\"\r\n    type=\"text\"\r\n    />\r\n    <InputWithLabel\r\n    value={password}\r\n    setValue={setPassword}\r\n    label=\"Password\"\r\n    type=\"password\"\r\n    />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RegisterPageInputs;","import React from 'react';\r\nimport CustomPrimaryButton from '../../shared/components/CustomPrimaryButton';\r\nimport RedirectInfo from '../../shared/components/RedirectInfo';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Tooltip } from '@mui/material';\r\n\r\nconst getFormNotValidMessage = () => {\r\n  return 'Username should contains  between 3 and 12 characters and password contains between 6 and 12 characters. Also correct email address should provide';\r\n}\r\n\r\nconst getFormValidMessage = () => {\r\n  return 'Press  to log in';\r\n}\r\n\r\nconst RegisterPageFooter = ({handleRegister, isFormValid}) => {\r\n  const history = useHistory();\r\n\r\n  const handlePushToLoginPage = () => {\r\n    history.push(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n    <Tooltip\r\n    title={!isFormValid ? getFormNotValidMessage() : getFormValidMessage()}\r\n    >\r\n      <div>\r\n        <CustomPrimaryButton\r\n          label=\"Register\"\r\n          additionalStyles={{ marginTop: '40px' }}\r\n          disabled={!isFormValid}\r\n          onClick={handleRegister}\r\n        />\r\n      </div>\r\n      </Tooltip>\r\n      <RedirectInfo \r\n      text=''\r\n      redirectText='Already have an account ?'\r\n      additionalStyles={{ marginTop: '5px' }}\r\n      redirectHandler={handlePushToLoginPage}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RegisterPageFooter;","import React, { useState, useEffect } from 'react';\r\nimport { Typography } from '@mui/material';\r\nimport AuthBox from '../../shared/components/AuthBox';\r\nimport RegisterPageInputs from './RegisterPageInputs';\r\nimport RegisterPageFooter from './RegisterFooter';\r\nimport { validateRegisterForm } from '../../shared/utils/validators';\r\nimport { connect } from \"react-redux\";\r\nimport { getActions } from \"../../store/actions/authActions\"\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst RegisterPage = ({register}) => {\r\n  const history = useHistory();\r\n\r\n  const [mail, setMail] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  const handleRegister = () => {\r\n    const userDetails = {\r\n      mail,\r\n      password,\r\n      username\r\n    };\r\n    register(userDetails, history);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(validateRegisterForm({\r\n      mail,\r\n      username,\r\n      password\r\n    }));\r\n  }, [mail, username, password, setIsFormValid]);\r\n\r\n  return (\r\n    <AuthBox additionalStyles={{height: 460,}}>\r\n      <Typography \r\n        variant=\"h5\" \r\n        sx={{ \r\n          color: \"white\",\r\n          textAlign:\"center\", \r\n          fontWeight: \"bold\", \r\n          marginBottom: \"20px\",\r\n        }}\r\n      >\r\n        Create an account\r\n      </Typography>\r\n      <RegisterPageInputs \r\n      mail={mail}\r\n      username={username}\r\n      password={password}\r\n      setMail={setMail}\r\n      setUsername={setUsername}\r\n      setPassword={setPassword}\r\n      setIsFormValid={setIsFormValid}\r\n      />\r\n      <RegisterPageFooter \r\n      handleRegister={handleRegister}\r\n      isFormValid={isFormValid}\r\n      />\r\n    </AuthBox>\r\n  )\r\n}\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n}\r\n\r\nexport default connect(null, mapActionsToProps)(RegisterPage);","import React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport GroupsIcon from '@mui/icons-material/Groups';\r\n\r\nconst MainPageButton = () => {\r\n  return (\r\n    <Button\r\n      style={{\r\n        width: '48px',\r\n        height: '48px',\r\n        borderRadius: '16px',\r\n        margin: 0,\r\n        padding: 0,\r\n        minWidth: 0,\r\n        marginTop: \"10px\",\r\n        color: \"white\",\r\n        backgroundColor: \"#5865f2\",\r\n      }}\r\n    >\r\n      <GroupsIcon />\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default MainPageButton;","import { authActions } from '../actions/authActions';\r\n\r\nconst initState = {\r\n  userDetails: null\r\n}\r\n\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case authActions.SET_USER_DETAILS:\r\n      return {\r\n        ...state,\r\n        userDetails: action.userDetails\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import alertActions from \"../actions/alertActions\";\r\n\r\nconst initState = {\r\n  showAlertMessage: false,\r\n  alertMessageContent: null,\r\n}\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type){\r\n    case alertActions.OPEN_ALERT_MESSAGE:\r\n      return {\r\n        ...state,\r\n        showAlertMessage: true,\r\n        alertMessageContent: action.content,\r\n      };\r\n    case alertActions.CLOSE_ALERT_MESSAGE:\r\n      return {\r\n        ...state,\r\n        showAlertMessage: false,\r\n        alertMessageContent: null,\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","import { openAlertMessage } from './alertActions';\r\nimport * as api from '../../api';\r\n\r\nexport const friendsActions = {\r\n  SET_FRIENDS: 'FRIENDS.SET_FRIENDS',\r\n  SET_PENDING_FRIENDS_INVITATIONS: 'FRIENDS.SET_PENDING_FRIENDS_INVITATIONS',\r\n  SET_ONLINE_USERS: 'FRIENDS.SET_ONLINE_USERS',\r\n}\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    sendFriendInvitation: (data, closeDialogHandler) => {\r\n      dispatch(sendFriendInvitation(data, closeDialogHandler));\r\n    },\r\n    acceptFriendInvitation: (data) => {\r\n      dispatch(acceptFriendInvitation(data));\r\n    },\r\n    rejectFriendInvitation: (data) => {\r\n      dispatch(rejectFriendInvitation(data));\r\n    }\r\n  };\r\n};\r\n\r\nexport const setPendingFriendsInvitations = (pendingFriendsInvitations) => {\r\n  return {\r\n    type: friendsActions.SET_PENDING_FRIENDS_INVITATIONS,\r\n    pendingFriendsInvitations\r\n  };\r\n};\r\n\r\nexport const setFriends = (friends) => {\r\n  return {\r\n    type: friendsActions.SET_FRIENDS,\r\n    friends\r\n  }\r\n};\r\n\r\nexport const setOnlineUsers = (onlineUsers) => {\r\n  return {\r\n    type: friendsActions.SET_ONLINE_USERS,\r\n    onlineUsers\r\n  }\r\n};\r\n\r\nconst  sendFriendInvitation = (data, closeDialogHandler) => {\r\n  return async (dispatch) => {\r\n    const response = await api.sendFriendInvitation(data);\r\n\r\n    if (response.error){\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n    dispatch(openAlertMessage('Invitation has been sent!'));\r\n    closeDialogHandler();\r\n    }\r\n  }\r\n};\r\n\r\nconst acceptFriendInvitation = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await api.acceptFriendInvitation(data);\r\n\r\n    if (response.error){\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n    dispatch(openAlertMessage('Invitation accepted!'));\r\n    }\r\n  };\r\n};\r\n\r\nconst rejectFriendInvitation = (data) => {\r\n  return async (dispatch) => {\r\n    const response = await api.rejectFriendInvitation(data);\r\n\r\n    if (response.error){\r\n      dispatch(openAlertMessage(response.exception?.response?.data));\r\n    } else {\r\n    dispatch(openAlertMessage('Invitation Declined!'));\r\n    }\r\n  };\r\n};","import { friendsActions } from \"../actions/friendsActions\";\r\n\r\nconst initstate = {\r\n  friends: [],\r\n  pendingFriendsInvitations: [],\r\n  onlineUsers: [],\r\n}\r\n\r\nconst reducer = (state = initstate, action) => {\r\n  switch (action.type) {\r\n    case friendsActions.SET_PENDING_FRIENDS_INVITATIONS:\r\n      return {\r\n        ...state,\r\n        pendingFriendsInvitations: action.pendingFriendsInvitations,\r\n      };\r\n    case friendsActions.SET_FRIENDS:\r\n      return {\r\n        ...state,\r\n        friends: action.friends,\r\n      };\r\n    case friendsActions.SET_ONLINE_USERS:\r\n      return {\r\n        ...state,\r\n        onlineUsers: action.onlineUsers,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;","export const chatTypes = {\r\n  DIRECT: 'DIRECT',\r\n  GROUP: 'GROUP',\r\n};\r\n\r\nexport const chatActions = {\r\n  SET_CHOSEN_CHAT_DETAILS: 'CHAT.SET_CHOSEN_CHAT_DETAILS',\r\n  SET_MESSAGES: 'CHAT.SET_MESSAGES',\r\n  SET_CHAT_TYPE: 'CHAT.SET_CHAT_TYPE',\r\n};\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    setChosenChatDetails: (details, chatType) => {\r\n      dispatch(setChosenChatDetails(details, chatType));\r\n    }\r\n  };\r\n};\r\n\r\nexport const setChosenChatDetails = (chatDetails, type) => {\r\n  return {\r\n    type: chatActions.SET_CHOSEN_CHAT_DETAILS,\r\n    chatType: type,\r\n    chatDetails\r\n  };\r\n};\r\n\r\nexport const setMessages = (messages) => {\r\n  return {\r\n    type: chatActions.SET_MESSAGES,\r\n    messages\r\n  };\r\n};","import { chatActions } from '../actions/chatActions';\r\n\r\nconst initState = {\r\n  chosenChatDetails: null,\r\n  chatType: null,\r\n  messages: [],\r\n}\r\n\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case chatActions.SET_CHOSEN_CHAT_DETAILS:\r\n      return {\r\n        ...state,\r\n        chosenChatDetails: action.chatDetails,\r\n        chatType: action.chatType,\r\n        messages: [],\r\n      };\r\n    case chatActions.SET_MESSAGES:\r\n      return {\r\n        ...state,\r\n        messages: action.messages,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;","export const roomActions = {\r\n  OPEN_ROOM: 'ROOM.OPEN_ROOM',\r\n  SET_ROOM_DETAILS: 'ROOM.SET_ROOM_DETAILS',\r\n  SET_ACTIVE_ROOMS: 'ROOM.SET_ACTIVE_ROOMS',\r\n  SET_LOCAL_STREAM: 'ROOM.SET_LOCAL_STREAM',\r\n  SET_REMOTE_STREAMS: 'ROOM.SET_REMOTE_STREAMS',\r\n  SET_AUDIO_ONLY: 'ROOM.SET_AUDIO_ONLY',\r\n  SET_SCREEN_SHARE_STREAM: 'ROOM.SET_SCREEN_SHARE_STREAM',\r\n  SET_IS_USER_JOINED_WITH_ONLY_AUDIO: 'ROOM.SET_IS_USER_JOINED_WITH_ONLY_AUDIO',\r\n}\r\n\r\nexport const getActions = (dispatch) => {\r\n  return {\r\n    setAudioOnly: (audioOnly) => dispatch(setAudioOnly(audioOnly)),\r\n    setScreenSharingStream: (stream) => dispatch(setScreenSharingStream(stream)),\r\n  };\r\n};\r\n\r\nexport const setOpenRoom = (isUserRoomCreator = false, isUserInRoom = false) => {\r\n  return {\r\n    type: roomActions.OPEN_ROOM,\r\n    isUserRoomCreator,\r\n    isUserInRoom,\r\n  };\r\n};\r\n\r\nexport const setRoomDetails = (roomDetails) => {\r\n  return {\r\n    type: roomActions.SET_ROOM_DETAILS,\r\n    roomDetails,\r\n  };\r\n};\r\n\r\nexport const setActiveRooms = (activeRooms) => {\r\n  return {\r\n    type: roomActions.SET_ACTIVE_ROOMS,\r\n    activeRooms,\r\n  };\r\n};\r\n\r\nexport const setLocalStream = (localStream) => {\r\n  return {\r\n    type: roomActions.SET_LOCAL_STREAM,\r\n    localStream,\r\n  };\r\n};\r\n\r\nexport const setAudioOnly = (audioOnly) => {\r\n  return {\r\n    type: roomActions.SET_AUDIO_ONLY,\r\n    audioOnly,\r\n  };\r\n};\r\n\r\nexport const setRemoteStreams = (remoteStreams) => {\r\n  return {\r\n    type: roomActions.SET_REMOTE_STREAMS,\r\n    remoteStreams,\r\n  };\r\n};\r\n\r\nexport const setScreenSharingStream = (stream) => {\r\n  return {\r\n    type: roomActions.SET_SCREEN_SHARE_STREAM,\r\n    isScreenSharingActive: stream ? true : false,\r\n    screenSharingStream: stream || null,\r\n  };\r\n};\r\n\r\nexport const setIsUserJoinedWithOnlyAudio = (onlyWithAudio) => {\r\n  return {\r\n    type: roomActions.SET_IS_USER_JOINED_WITH_ONLY_AUDIO,\r\n    isUserJoinedWithOnlyAudio: onlyWithAudio,\r\n  };\r\n}","import { roomActions } from \"../actions/roomActions\";\r\n\r\nconst initState = {\r\n  isUserInRoom: false,\r\n  isUserRoomCreator: false,\r\n  roomDetails: null,\r\n  activeRooms: [],\r\n  localStream: null,\r\n  remoteStreams: [],\r\n  audioOnly: false,\r\n  screenSharingStream: null,\r\n  isScreenSharingActive: false,\r\n  isUserJoinedWithOnlyAudio: false,\r\n}\r\n\r\nconst reducer = ( state = initState, action ) => {\r\n  switch ( action.type ) {\r\n    case roomActions.OPEN_ROOM:\r\n      return {\r\n        ...state,\r\n        isUserInRoom: action.isUserInRoom,\r\n        isUserRoomCreator: action.isUserRoomCreator,\r\n      };\r\n    case roomActions.SET_ROOM_DETAILS:\r\n      return {\r\n        ...state,\r\n        roomDetails: action.roomDetails,\r\n      };\r\n    case roomActions.SET_ACTIVE_ROOMS:\r\n      return {\r\n        ...state,\r\n        activeRooms: action.activeRooms,\r\n      };\r\n    case roomActions.SET_LOCAL_STREAM:\r\n      return {\r\n        ...state,\r\n        localStream: action.localStream,\r\n      };\r\n    case roomActions.SET_AUDIO_ONLY:\r\n      return {\r\n        ...state,\r\n        audioOnly: action.audioOnly,\r\n      };\r\n    case roomActions.SET_REMOTE_STREAMS:\r\n      return {\r\n        ...state,\r\n        remoteStreams: action.remoteStreams,\r\n      };\r\n    case roomActions.SET_SCREEN_SHARE_STREAM:\r\n      return {\r\n        ...state,\r\n        screenSharingStream: action.screenSharingStream,\r\n        isScreenSharingActive: action.isScreenSharingActive,\r\n    };\r\n    case roomActions.SET_USER_JOINED_WITH_ONLY_AUDIO:\r\n      return {\r\n        ...state,\r\n        isUserJoinedWithOnlyAudio: action.isUserJoinedWithOnlyAudio,\r\n      };\r\n    default: \r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;","import { composeWithDevTools } from 'redux-devtools-extension';\r\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport authReducer from './reducers/authReducer';\r\nimport alertReducer from './reducers/alertReducer';\r\nimport friendsReducer from './reducers/friendsReducer';\r\nimport chatReducer from './reducers/chatReducer';\r\nimport roomReducer from './reducers/roomReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n  auth: authReducer,\r\n  alert: alertReducer,\r\n  friends: friendsReducer,\r\n  chat: chatReducer,\r\n  room: roomReducer,\r\n});\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;","import store from '../../store/store';\r\nimport { setMessages } from '../../store/actions/chatActions';\r\n\r\nexport const updateDirectChatHistoryIfActive = (data) => {\r\n  const { participants, messages } = data;\r\n\r\n  // find id from token and id from active participants\r\n  const recieverId = store.getState().chat.chosenChatDetails?.id;\r\n  const userId = store.getState().auth.userDetails._id;\r\n\r\n  if (recieverId && userId) {\r\n    const usersInConversation = [recieverId, userId];\r\n    updateChatHistoryIfSameConversationActive({\r\n      participants,\r\n      usersInConversation,\r\n      messages,\r\n    });\r\n  }\r\n};\r\n\r\nconst updateChatHistoryIfSameConversationActive = ({\r\n  participants,\r\n  usersInConversation,\r\n  messages,\r\n}) => {\r\n  const result = participants.every(function (participantId) {\r\n    return usersInConversation.includes(participantId);\r\n  });\r\n\r\n  if (result) {\r\n    store.dispatch(setMessages(messages));\r\n  }\r\n};","import store from '../store/store';\r\nimport { setLocalStream, setRemoteStreams } from '../store/actions/roomActions';\r\nimport Peer from 'simple-peer';\r\nimport * as socketConnection from './socketConnection';\r\n\r\nconst getConfiguration = () => {\r\n  const turnIceServers = null;\r\n\r\n  if (turnIceServers) {\r\n    // TODO use turn server credentials\r\n  } else {\r\n    console.log('Using only stun server');\r\n    return {\r\n      iceServers: [\r\n        {\r\n          urls: 'stun:stun.l.google.com:19302',\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\r\nconst onlyAudioConstraints = {\r\n  audio: true,\r\n  video: false\r\n};\r\n\r\nconst defaultConstraints = {\r\n  audio: true,\r\n  video: true\r\n};\r\n\r\nlet peers = {}; \r\n\r\nexport const getLocalStreamPreview = (onlyAudio = false, callbackFunc) => {\r\n  const constraints = onlyAudio ? onlyAudioConstraints : defaultConstraints;\r\n\r\n  navigator.mediaDevices.getUserMedia(constraints).then((stream) => {\r\n    store.dispatch(setLocalStream(stream));\r\n    callbackFunc(stream);\r\n  }).catch((err) => {\r\n    console.log(err);\r\n    console.log('Cannot get access to local stream');\r\n  });\r\n};\r\n\r\nexport const prepareNewPeerConnection = (connUserSocketId, isInitiator) => {\r\n  const localStream = store.getState().room.localStream;\r\n\r\n  if (isInitiator) {\r\n    console.log('preparing new peer connection as initiator');\r\n  }\r\n  else {\r\n    console.log('preparing new peer connection as not initiator');\r\n  }\r\n\r\n  peers[connUserSocketId] = new Peer({\r\n    initiator: isInitiator,\r\n    config: getConfiguration(),\r\n    stream: localStream,\r\n  });\r\n\r\n  peers[connUserSocketId].on('signal', (data) => {\r\n    const signalData = {\r\n      signal: data,\r\n      connUserSocketId,\r\n    };\r\n\r\n\r\n    socketConnection.signalPeerData(signalData);\r\n\r\n\r\n    // TODO \r\n    // pass signaling data to others\r\n    // socketConnection.signalPeerData(signalData);\r\n  });\r\n\r\n  peers[connUserSocketId].on('stream', (remoteStream) => {\r\n    // TODO\r\n    //add new remote stream to our server store\r\n    console.log('remote stream came from other user');\r\n    console.log('direct connection has been established');\r\n    remoteStream.connUserSocketId = connUserSocketId;\r\n    addNewRemoteStream(remoteStream);\r\n  });\r\n};\r\n\r\n\r\nexport const handleSignalingData = (data) => {\r\n  const { connUserSocketId, signal } = data;\r\n\r\n  if (peers[connUserSocketId]) {\r\n    peers[connUserSocketId].signal(signal);\r\n  }\r\n};\r\n\r\nexport const addNewRemoteStream = (remoteStream) => {\r\n  const remoteStreams = store.getState().room.remoteStreams;\r\n  const newRemoteStreams = [...remoteStreams, remoteStream];\r\n\r\n  store.dispatch(setRemoteStreams(newRemoteStreams));\r\n};\r\n\r\nexport const closeAllConnection = () => {\r\n  Object.entries(peers).forEach((mappedObject) => {\r\n    const connUserSocketId = mappedObject[0];\r\n\r\n    if (peers[connUserSocketId]) {\r\n      peers[connUserSocketId].destroy();\r\n      delete peers[connUserSocketId];\r\n    }\r\n  });\r\n};\r\n\r\nexport const handleParticipantLeftRoom = (data) => {\r\n  const { connUserSocketId } = data;\r\n\r\n  if (peers[connUserSocketId]) {\r\n    peers[connUserSocketId].destroy();\r\n    delete peers[connUserSocketId];\r\n  }\r\n\r\n  const remoteStreams = store.getState().room.remoteStreams;\r\n\r\n  const newRemoteStreams = remoteStreams.filter((remoteStream) => {\r\n    return remoteStream.connUserSocketId !== connUserSocketId;\r\n  });\r\n\r\n  store.dispatch(setRemoteStreams(newRemoteStreams));\r\n};\r\n\r\nexport const switchOutgoingTracks = (stream) => {\r\n  for (let socket_id in peers) {\r\n    for (let index in peers[socket_id].streams[0].getTracks()) {\r\n      for (let index2 in stream.getTracks()) {\r\n        if (\r\n          peers[socket_id].streams[0].getTracks()[index].kind ===\r\n          stream.getTracks()[index2].kind\r\n        ) {\r\n          peers[socket_id].replaceTrack(\r\n            peers[socket_id].streams[0].getTracks()[index],\r\n            stream.getTracks()[index2],\r\n            peers[socket_id].streams[0]\r\n          );\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n};","import io from 'socket.io-client';\r\nimport { setPendingFriendsInvitations, setFriends, setOnlineUsers } from '../store/actions/friendsActions';\r\nimport store from '../store/store';\r\nimport { updateDirectChatHistoryIfActive } from '../shared/utils/chat';\r\nimport * as roomHandler from './roomHandler';\r\nimport * as webRTCHandler from './webRTCHandler';\r\n\r\nlet socket = null;\r\n\r\nexport const connectWithSocketServer = (userDetails) => {\r\n  const jwtToken = userDetails.token;\r\n\r\n  socket = io('https://discord-backend-arpit.herokuapp.com/', {\r\n    auth: {\r\n      token: jwtToken,\r\n    }\r\n  });\r\n\r\n  socket.on('connect', () => {\r\n    console.log('successfully connected to socket.io server');\r\n    console.log(socket.id);\r\n  });\r\n\r\n  socket.on('friends-invitations', (data) => {\r\n    const { pendingInvitations } = data;\r\n    store.dispatch(setPendingFriendsInvitations(pendingInvitations));\r\n  });\r\n\r\n  socket.on('friends-list', (data) => {\r\n    const { friends } = data;\r\n    store.dispatch(setFriends(friends));\r\n  });\r\n\r\n  socket.on('online-users', (data) => {\r\n    const { onlineUsers } = data;\r\n    store.dispatch(setOnlineUsers(onlineUsers));\r\n  });\r\n\r\n  socket.on('direct-chat-history', (data) => {\r\n    updateDirectChatHistoryIfActive(data);\r\n  });\r\n\r\n  socket.on('room-create', (data) => {\r\n    roomHandler.newRoomCreated(data);\r\n  });\r\n\r\n  socket.on('active-rooms', (data) => {\r\n    roomHandler.updateActiveRooms(data);\r\n  });\r\n\r\n  socket.on(\"conn-prepare\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, false);\r\n    socket.emit(\"conn-init\", { connUserSocketId: connUserSocketId });\r\n  });\r\n\r\n  socket.on(\"conn-init\", (data) => {\r\n    const { connUserSocketId } = data;\r\n    webRTCHandler.prepareNewPeerConnection(connUserSocketId, true);\r\n  });\r\n\r\n  socket.on(\"conn-signal\", data => {\r\n    webRTCHandler.handleSignalingData(data);\r\n  });\r\n\r\n  socket.on('room-participant-left', (data) => {\r\n    console.log('user left room');\r\n    webRTCHandler.handleParticipantLeftRoom(data);\r\n  });\r\n};\r\n\r\nexport const  sendDirectMessage = (data) => {\r\n  console.log(data);\r\n  socket.emit('direct-message', data);\r\n};\r\n\r\nexport const getDirectChatHistory = (data) => {\r\n  socket.emit('direct-chat-history', data);\r\n};\r\n\r\nexport const createNewRoom = () => {\r\n  socket.emit('room-create');\r\n};\r\n\r\nexport const joinRoom = (data) => {\r\n  socket.emit('room-join', data);\r\n};\r\n\r\nexport const leaveRoom = (data) => {\r\n  socket.emit('room-leave', data);\r\n};\r\n\r\nexport const signalPeerData = (data) => {\r\n  socket.emit('conn-signal', data);\r\n};\r\n","import store from \"../store/store\";\r\nimport { setOpenRoom, setRoomDetails, setActiveRooms, setLocalStream, setRemoteStreams, setScreenSharingStream, setIsUserJoinedWithOnlyAudio } from \"../store/actions/roomActions\";\r\nimport * as socketConnection from \"./socketConnection\";\r\nimport * as webRTCHandler from \"./webRTCHandler\";\r\n\r\nexport const createNewRoom = () => {\r\n  const successCallbackFunc = () => {\r\n    store.dispatch(setOpenRoom(true,true));\r\n\r\n    const audioOnly = store.getState().room.audioOnly;\r\n    store.dispatch(setIsUserJoinedWithOnlyAudio(audioOnly));\r\n    // store.dispatch(setRoomDetails(socketConnection.getRoomDetails()));\r\n    socketConnection.createNewRoom();\r\n  };\r\n\r\n  const audioOnly = store.getState().room.audioOnly;\r\n  webRTCHandler.getLocalStreamPreview(audioOnly, successCallbackFunc);\r\n};\r\n\r\nexport const newRoomCreated = (data) => {\r\n  const { roomDetails } = data;\r\n\r\n  store.dispatch(setRoomDetails(roomDetails));\r\n};\r\n\r\nexport const updateActiveRooms = (data) => {\r\n  const { activeRooms } = data;\r\n  \r\n  const friends = store.getState().friends.friends;\r\n  const rooms = [];\r\n\r\n  const userId = store.getState().auth.userDetails?._id;\r\n\r\n  activeRooms.forEach(room => {\r\n    const isRoomCreatedByMe = room.roomCreator.userId === userId;\r\n\r\n    if (isRoomCreatedByMe) {\r\n      rooms.push({\r\n        ...room,\r\n        creatorUsername: \"Me\",\r\n      });\r\n    } else {\r\n      friends.forEach((f) => {\r\n        if (f.id === room.roomCreator.userId) {\r\n          rooms.push({...room, creatorUsername: f.username});\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  store.dispatch(setActiveRooms(rooms));\r\n};\r\n\r\n\r\nexport const joinRoom = (roomId) => {\r\n  const successCallbackFunc = () => {\r\n    store.dispatch(setRoomDetails({roomId}));\r\n    store.dispatch(setOpenRoom(false, true));\r\n    const audioOnly = store.getState().room.audioOnly;\r\n    store.dispatch(setIsUserJoinedWithOnlyAudio(audioOnly));\r\n    socketConnection.joinRoom({ roomId });\r\n  };\r\n\r\n  const audioOnly = store.getState().room.audioOnly;\r\n  webRTCHandler.getLocalStreamPreview(audioOnly, successCallbackFunc);\r\n};\r\n\r\nexport const leaveRoom = () => {\r\n  const roomId = store.getState().room.roomDetails.roomId;\r\n\r\n  const localSream = store.getState().room.localStream;\r\n  if (localSream) {\r\n    localSream.getTracks().forEach(track => track.stop());\r\n    store.dispatch(setLocalStream(null));\r\n  }\r\n\r\n  const screenSharingStream = store.getState().room.screenSharingStream;\r\n  if (screenSharingStream) {\r\n    screenSharingStream.getTracks().forEach(track => track.stop());\r\n    store.dispatch(setScreenSharingStream(null));\r\n  }\r\n\r\n  store.dispatch(setRemoteStreams([]));\r\n  webRTCHandler.closeAllConnection();\r\n\r\n  socketConnection.leaveRoom({ roomId });\r\n  store.dispatch(setRoomDetails(null));\r\n  store.dispatch(setOpenRoom(false, false));\r\n}","import React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport * as roomHandler from '../../realtimeCommunication/roomHandler';\r\n\r\nconst CreateRoomButton = ({isUserInRoom}) => {\r\n  const createNewRoomHandler = () => {\r\n    roomHandler.createNewRoom();\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      disabled={isUserInRoom}\r\n      onClick={createNewRoomHandler}\r\n      style={{\r\n        width: '48px',\r\n        height: '48px',\r\n        borderRadius: '16px',\r\n        margin: 0,\r\n        padding: 0,\r\n        minWidth: 0,\r\n        marginTop: \"10px\",\r\n        color: \"white\",\r\n        backgroundColor: \"#5865f2\",\r\n      }}\r\n    >\r\n      <AddIcon />\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default CreateRoomButton;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\n\r\nconst AvatarPreview = styled('div')({\r\n  height: '35px',\r\n  width: '35px',\r\n  borderRadius: '35px',\r\n  backgroundColor: '#5865f2',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  fontSize: '14px',\r\n  fontWeight: '700',\r\n  color: 'white',\r\n  letterSpacing: '1px',\r\n})\r\n\r\nconst Avatar = ({ username, large }) => {\r\n  return (\r\n    <AvatarPreview style={large ? { height: '80px',width: '80px', fontSize: '35px', borderRadius: '80px' } : {} }>\r\n      {username.substring(0, 2)}\r\n    </AvatarPreview>\r\n  )\r\n}\r\n\r\nexport default Avatar;","import React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Tooltip from '@mui/material/Tooltip';  \r\nimport Avatar from '../../shared/components/Avatar';\r\nimport * as roomHandler from '../../realtimeCommunication/roomHandler';\r\n\r\nconst ActiveRoomButton = ({\r\n  creatorUsername,\r\n  roomId,\r\n  amountOfParticipants,\r\n  isUserInRoom,\r\n}) => {\r\n  const handleJoinActiveRoom = () => {\r\n    if (amountOfParticipants < 4){\r\n      roomHandler.joinRoom(roomId);\r\n    }\r\n  }\r\n\r\n  const activeRoomButtonDisabled = amountOfParticipants >= 4;\r\n  const roomTite = `Creator: ${creatorUsername}. Connected: ${amountOfParticipants}`;\r\n\r\n  return (\r\n    <Tooltip title={roomTite}>\r\n      <div>\r\n        <Button\r\n          style={{\r\n            width: '48px',\r\n            height: '48px',\r\n            borderRadius: '16px',\r\n            margin: 0,\r\n            padding: 0,\r\n            minWidth: 0,\r\n            marginTop: \"10px\",\r\n            color: \"white\",\r\n            backgroundColor: \"#5865f2\",\r\n          }}\r\n          disabled={activeRoomButtonDisabled || isUserInRoom}\r\n          onClick={handleJoinActiveRoom}\r\n        >\r\n          <Avatar username={creatorUsername}/>\r\n        </Button>\r\n      </div>\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nexport default ActiveRoomButton;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport MainPageButton from './MainPageButton';\r\nimport CreateRoomButton from './CreateRoomButton';\r\nimport { connect } from 'react-redux';\r\nimport ActiveRoomButton from './ActiveRoomButton';\r\n\r\nconst MainContainer = styled('div')({\r\n  width: \"72px\",\r\n  minWidth: \"72px\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  backgroundColor: \"#202225\",\r\n  overflowY: \"auto\",\r\n});\r\n\r\nconst SideBar = ({ activeRooms, isUserInRoom }) => {\r\n  return (\r\n    <MainContainer>\r\n      <MainPageButton />\r\n      <CreateRoomButton isUserInRoom={isUserInRoom}/>\r\n      {activeRooms.map((room) => (\r\n        <ActiveRoomButton \r\n          roomId={room.roomId}\r\n          creatorUsername={room.creatorUsername}\r\n          amountOfParticipants={room.participants.length}\r\n          key={room.roomId}\r\n          isUserInRoom={isUserInRoom}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(SideBar);","import React, { useEffect, useState } from 'react';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport Typography from '@mui/material/Typography';\r\nimport { validateMail } from '../../shared/utils/validators';\r\nimport InputWithLabel from '../../shared/components/InputWithLabel';\r\nimport CustomPrimaryButton from '../../shared/components/CustomPrimaryButton';\r\nimport { connect } from 'react-redux';\r\nimport {getActions} from \"../../store/actions/friendsActions\";\r\n\r\nconst AddFriendDialog = ({\r\n  isDialogOpen,\r\n  closeDialogHandler,\r\n  sendFriendInvitation = () => {},\r\n}) => {\r\n  const [mail,setMail] = useState('');\r\n  const [isFormValid,setIsFormValid] = useState('');\r\n\r\n  const handleSendInvitation = () => {\r\n    sendFriendInvitation({\r\n      targetMailAddress: mail,\r\n    }\r\n    ,handleCloseDialog);\r\n  };\r\n\r\n  const handleCloseDialog = () => {\r\n    closeDialogHandler();\r\n    setMail('');\r\n  }\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(validateMail(mail));\r\n  }, [mail, setIsFormValid]);\r\n\r\n  return (\r\n    <div>\r\n      <Dialog open={isDialogOpen} onClose={handleCloseDialog}>\r\n        <DialogTitle>\r\n          <Typography>Invite a Friend</Typography>\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            <Typography>Enter a email address of a friend which you like to invite</Typography>\r\n          </DialogContentText>\r\n          <InputWithLabel \r\n          label='Mail'\r\n          type='text'\r\n          value={mail}\r\n          setValue={setMail}\r\n          placeholder=\"Enter a mail address\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <CustomPrimaryButton \r\n            onClick={handleSendInvitation}\r\n            disabled={!isFormValid}\r\n            label='Invite'\r\n            additionalStyles={{\r\n              marginLeft: '15px',\r\n              marginRight: '15px',\r\n              marginBottom: '10px',\r\n            }}\r\n          />\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null,mapActionsToProps)(AddFriendDialog);","import React, { useState } from 'react';\r\nimport CustomPrimaryButton from '../../shared/components/CustomPrimaryButton';\r\nimport AddFriendDialog from './AddFriendDialog';\r\n\r\n\r\nconst additionalStyles = {\r\n  marginTop: '10px',\r\n  marginLeft: '5px',\r\n  width: '80%',\r\n  height: '30px',\r\n  background: '#3ba55d',\r\n}\r\n\r\nconst AddFriendButton = () => {\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n\r\n  const handleOpenAddFriendDialog = () => {\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleCloseAddFriendDialog = () => {\r\n    setIsDialogOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <CustomPrimaryButton \r\n      additionalStyles={additionalStyles}\r\n      label=\"Add Friend\"\r\n      onClick={handleOpenAddFriendDialog}\r\n      />\r\n      <AddFriendDialog \r\n      isDialogOpen={isDialogOpen}\r\n      closeDialogHandler={handleCloseAddFriendDialog}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AddFriendButton;","import React from 'react';\r\nimport { Typography } from '@mui/material'\r\n\r\nconst FriendsTitle = ({title}) => {\r\n  return (\r\n    <Typography\r\n      sx={{\r\n        textTransform: \"uppercase\",\r\n        color: \"#8e9297\",\r\n        fontSize: \"14px\",\r\n        marginTop: '10px',\r\n      }}\r\n    >\r\n      {title}\r\n    </Typography>\r\n  )\r\n}\r\n\r\nexport default FriendsTitle;","import React from 'react';\r\nimport { Box } from '@mui/material';\r\nimport FiberManualRecord from '@mui/icons-material/FiberManualRecord';\r\n\r\nconst OnlineIndicator = () => {\r\n  return (\r\n    <Box sx={{\r\n      color: \"#3ba55d\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      position: \"absolute\",\r\n      right: '5px',\r\n    }}>\r\n      <FiberManualRecord />\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default OnlineIndicator;","import React from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Avatar from '../../../shared/components/Avatar';\r\nimport Typography from '@mui/material/Typography';\r\nimport OnlineIndicator from './OnlineIndicator';\r\nimport { chatTypes, getActions } from '../../../store/actions/chatActions';\r\nimport { connect } from 'react-redux';\r\n\r\nconst FriendListItem = ({ id, username, isOnline, setChosenChatDetails }) => {\r\n\r\n  const handleChooseActiveConversation = () => {\r\n    setChosenChatDetails({ id: id, name: username }, chatTypes.DIRECT);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleChooseActiveConversation}\r\n      style={{\r\n        width: '100%',\r\n        height: '42px',\r\n        marginTop: '10px',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'flex-start',\r\n        textTransform: 'none',\r\n        color: 'black',\r\n        position: 'relative',\r\n        '&:hover': {\r\n          backgroundColor: '#393C43',\r\n        },\r\n      }}\r\n    >\r\n      <Avatar username={username} />\r\n      <Typography\r\n        style={{\r\n          marginLeft: '7px',\r\n          fontWeight: 700,\r\n          color: '#8e9297',\r\n          variant:\"subtitle\",\r\n          align:\"left\",\r\n        }}\r\n      >\r\n        {username}\r\n      </Typography>\r\n      {isOnline && <OnlineIndicator />}\r\n    </Button>\r\n  )\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(FriendListItem);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport FriendListItem from './FriendListItem';\r\nimport { connect } from 'react-redux';\r\n\r\nconst MainContainer = styled('div')({\r\n  flexGrow: 1,\r\n  width: \"100%\",\r\n  height: \"70%\",\r\n  overflow: 'auto',\r\n});\r\n\r\nconst checkOnlineUsers = (friends = [], onlineUsers = []) => {\r\n  friends.forEach(f => {\r\n    const isUserOnline = onlineUsers.find(user => user.userId === f.id);\r\n    f.isOnline = isUserOnline ? true : false;\r\n  });\r\n\r\n  return friends;\r\n};\r\n\r\nconst FriendsList = ({ friends, onlineUsers }) => {\r\n  return (\r\n    <MainContainer>\r\n      {checkOnlineUsers(friends, onlineUsers).map((f) => (\r\n        <FriendListItem \r\n          id={f.id}  \r\n          username={f.username}\r\n          key={f.id}\r\n          isOnline={f.isOnline}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ friends }) => {\r\n  return {\r\n    ...friends,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(FriendsList);","import React from 'react';\r\nimport CheckIcon from '@mui/icons-material/Check';\r\nimport ClearIcon from '@mui/icons-material/Clear';\r\nimport { Box } from '@mui/material';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\nconst InvitationDecisionButtons = ({\r\n  disabled,\r\n  acceptInvitationHandler,\r\n  rejectInvitationHandler,\r\n}) => {\r\n  return (\r\n    <Box>\r\n      <IconButton \r\n        style={{color: \"white\"}}\r\n        disabled={disabled}\r\n        onClick={acceptInvitationHandler}\r\n      >\r\n        <CheckIcon />\r\n      </IconButton>\r\n      <IconButton \r\n        style={{color: \"white\"}}\r\n        disabled={disabled}\r\n        onClick={rejectInvitationHandler}\r\n      >\r\n        <ClearIcon />\r\n      </IconButton>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default InvitationDecisionButtons;","import React, { useState } from 'react';\r\nimport { Tooltip, Typography, Box } from '@mui/material';\r\nimport Avatar from '../../../shared/components/Avatar';\r\nimport InvitationDecisionButtons from './InvitationDecisionButtons';\r\nimport { connect } from 'react-redux';\r\nimport { getActions } from '../../../store/actions/friendsActions';\r\n\r\nconst PendingInvitationListItem = ({\r\n  id,\r\n  username,\r\n  mail,\r\n  acceptFriendInvitation = () => {},\r\n  rejectFriendInvitation = () => {},\r\n}) => {\r\n  const [buttonDisabled, setButtonDisabled] = useState(false);\r\n\r\n  const handleAcceptInvitation = () => {\r\n    acceptFriendInvitation({ id });\r\n    setButtonDisabled(true);\r\n  }\r\n\r\n  const handleRejectInvitation = () => {\r\n    rejectFriendInvitation({ id });\r\n    setButtonDisabled(true);\r\n  }\r\n\r\n  return (\r\n    <Tooltip title={mail}>\r\n      <div style={{width:\"100%\"}}>\r\n        <Box\r\n          sx={{\r\n            width: '100%',\r\n            height: '42px',\r\n            marginTop: '10px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n          }}\r\n        >\r\n          <Avatar username={username} />\r\n          <Typography \r\n            sx={{\r\n              marginLeft: '7px',\r\n              fontWeight: 700,\r\n              color: '#8e9297',\r\n              flexGrow: 1,\r\n            }}\r\n            variant=\"subtitle1\"\r\n          > {username} </Typography>\r\n          <InvitationDecisionButtons\r\n            disabled={buttonDisabled}\r\n            acceptInvitationHandler={handleAcceptInvitation}\r\n            rejectInvitationHandler={handleRejectInvitation}\r\n          />\r\n        </Box>\r\n      </div>\r\n    </Tooltip>\r\n  )\r\n}\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(null, mapActionsToProps)(PendingInvitationListItem);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport PendingInvitationListItem from './PendingInvitationListItem';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nconst MainContainer = styled('div')({\r\n  width: \"100%\",\r\n  height: \"22%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  overflow: 'auto',\r\n})\r\n\r\nconst PendingInvitationList = ({ pendingFriendsInvitations }) => {\r\n  return (\r\n    <MainContainer>\r\n      {pendingFriendsInvitations.map(invitation => (\r\n        <PendingInvitationListItem \r\n          key={invitation._id}\r\n          id={invitation._id}\r\n          username={invitation.senderId.username}\r\n          mail={invitation.senderId.mail}\r\n        />\r\n      ))}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\n\r\n\r\nconst mapStoreStateToProps = ({ friends }) => {\r\n  return {\r\n    ...friends,\r\n  }\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(PendingInvitationList);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport AddFriendButton from './AddFriendButton';\r\nimport FriendsTitle from './FriendsTitle';\r\nimport FriendsList from './FriendsList/FriendsList';\r\nimport PendingInvitationList from './PendingInvitationList/PendingInvitationList';\r\nimport { connect } from 'react-redux';\r\n\r\nconst MainContainer = styled('div')({\r\n  width: \"224px\",\r\n  minWidth: \"224px\",\r\n  height: \"100%\",\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n  alignItems: \"center\",\r\n  backgroundColor: \"#2f3136\",\r\n});\r\n\r\nconst UsernameLabel = styled('div')({\r\n  width: \"224px\",\r\n  minWidth: \"224px\",\r\n  height: \"5%\",\r\n  color: \"white\",\r\n  fontWeight: \"600\",\r\n  textAlign: \"center\",\r\n  marginTop: \"10px\",\r\n  backgroundColor: \"#303239\",\r\n});\r\n\r\n\r\nconst FriendsSideBar = ({ userDetails }) => {\r\n  return (\r\n    <MainContainer>\r\n      <UsernameLabel>\r\n        {`@ ${userDetails?.username}`}\r\n      </UsernameLabel>\r\n      <AddFriendButton />\r\n      <FriendsTitle title='Private messages'/>\r\n      <FriendsList />\r\n      <FriendsTitle title='Invitations'/>\r\n      <PendingInvitationList />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ auth }) => {\r\n  return {\r\n    ...auth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(FriendsSideBar);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport { Typography } from '@mui/material';\r\n\r\nconst Wrapper = styled('div')({\r\n  flexGrow: 1,\r\n  height: '100%',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n});\r\n\r\nconst WelcomeMessage = () => {\r\n  return <Wrapper>\r\n    <Typography \r\n      variant=\"h6\"\r\n      sx={{color: 'white'}}\r\n    >To start chatting - choose conversation</Typography>\r\n  </Wrapper>;\r\n}\r\n\r\nexport default WelcomeMessage;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport Avatar from '../../../shared/components/Avatar';\r\nimport Typography from '@mui/material/Typography';\r\n\r\nconst MainContainer = styled('div')({\r\n  width: '98%',\r\n  display: 'column',\r\n  marginTop: '10px',\r\n});\r\n\r\nconst MessagesHeader = ({ name = '' }) => {\r\n  return (\r\n    <MainContainer>\r\n      <Avatar large username={name} />\r\n      <Typography\r\n        variant=\"h4\"\r\n        sx={{\r\n          color: 'white',\r\n          fontWeight: '600',\r\n          marginRight: '5px',\r\n          marginLeft: '5px',\r\n        }}\r\n      >\r\n        {`@ ${name}`}\r\n      </Typography>\r\n      <Typography\r\n        sx={{\r\n          color: '#b9bbbe',\r\n          marginLeft: '5px',\r\n          marginRight: '5px',\r\n        }}\r\n      >\r\n        This is the beginning of your conversation with {name}\r\n      </Typography>\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nexport default MessagesHeader;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport Avatar from '../../../shared/components/Avatar';\r\nimport Typography from '@mui/material/Typography';\r\nimport { connect } from 'react-redux';\r\n\r\nconst MainContainer = styled('div')({\r\n  width: '100%',\r\n  display: 'flex',\r\n  padding: '5px 3px',\r\n  marginTop: '10px',\r\n  '&:hover': {\r\n    backgroundColor: '#2f3136',\r\n  },\r\n});\r\n\r\nconst AvatarContainer = styled('div')({\r\n  width: '50px',\r\n  minWidth: '50px',\r\n});\r\n\r\nconst MessageContainer = styled('div')({\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n});\r\n\r\nconst MessageContent = styled('div')({\r\n  color: '#dcddde',\r\n  wordBreak: 'break-all',\r\n});\r\n\r\nconst SameAuthorMessageContent = styled('div')({\r\n  color: '#dcddde',\r\n  width: '100%',\r\n  padding: '5px 3px',\r\n  wordBreak: 'break-all',\r\n  '&:hover': {\r\n    backgroundColor: '#2f3136',\r\n  }\r\n}); \r\n\r\nconst SameAuthorMessageText = styled('div')({\r\n  marginLeft: '50px',\r\n});\r\n\r\n\r\nconst Message = ({ content, sameAuthor, username, date, sameDay, userDetails }) => {\r\n\r\n  const loginUsername = userDetails?.username || \"\";\r\n  let userNameStyle;\r\n  if (loginUsername === username) {\r\n    userNameStyle = {\r\n      fontSize: \"16px\",\r\n      color: \"#ec4f4f\",\r\n    };\r\n  } else {\r\n    userNameStyle = {\r\n      fontSize: \"16px\",\r\n      color: \"rgb(234,189,18)\",\r\n    };\r\n  };\r\n\r\n  if(sameAuthor && sameDay) {\r\n    return (\r\n      <SameAuthorMessageContent>\r\n        <SameAuthorMessageText>{content}</SameAuthorMessageText>\r\n      </SameAuthorMessageContent>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <MainContainer>\r\n      <AvatarContainer>\r\n        <Avatar username={username} />\r\n      </AvatarContainer>\r\n      <MessageContainer>\r\n        <Typography style={userNameStyle}>\r\n          {username}{' '}\r\n          <span style={{fontSize: '16px', color:'#72767d'}}>{date}</span>\r\n        </Typography>\r\n        <MessageContent>{content}</MessageContent>\r\n      </MessageContainer>\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nconst mapStoreStateToProps = ({ auth }) => {\r\n  return {\r\n    ...auth,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Message);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\n\r\nconst Separator = styled('div')({\r\n  width: '100%',\r\n  height: '1px',\r\n  backgroundColor: '#b9bbbe',\r\n  position: 'relative',\r\n  marginTop: '20px',\r\n  marginBottom: '10px',\r\n});\r\n\r\nconst DateLabel = styled('div')({\r\n  backgroundColor: '#36393f',\r\n  position: 'absolute',\r\n  top: '-10px',\r\n  left: '45%',\r\n  color: '#b9bbbe',\r\n  padding: '0 5px',\r\n  fontSize: '14px',\r\n});\r\n\r\nconst DateSeparator = ({ date }) => {\r\n  return (\r\n    <Separator>\r\n      <DateLabel>{date}</DateLabel>\r\n    </Separator>\r\n  )\r\n}\r\n\r\nexport default DateSeparator;","import React, { useRef, useEffect } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport MessagesHeader from './MessagesHeader';\r\nimport { connect } from 'react-redux';\r\nimport Message from './Message';\r\nimport DateSeparator from './DateSeparator';\r\n\r\nconst MainContainer = styled('div')({\r\n  height: 'calc(100% - 60px)',\r\n  overflow: 'auto',\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n});\r\n\r\nconst convertDateToHumanReadable = (date, format) => {\r\n  const map = {\r\n  mm: date.getMonth() + 1,\r\n  dd: date.getDate(),\r\n  yy: date.getFullYear().toString().slice(-2),\r\n  yyyy: date.getFullYear(),\r\n  };\r\n  return format.replace(/mm|dd|yy|yyy/gi, (matched) => map[matched]);\r\n};\r\n\r\nconst Messages = ({ chosenChatDetails, messages }) => {\r\n  const messageEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    messageEndRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  return (\r\n    <MainContainer>\r\n      <MessagesHeader name={chosenChatDetails?.name}/>\r\n      {messages.map((message, index) => {\r\n        const sameAuthor = \r\n          index>0 && \r\n          messages[index].author._id === messages[index-1].author._id;\r\n\r\n        const sameDay = \r\n          index>0 && \r\n          convertDateToHumanReadable(new Date(message.date), 'dd/mm/yy') === \r\n          convertDateToHumanReadable(new Date(messages[index-1].date), 'dd/mm/yy');\r\n          \r\n        return (\r\n          <div key={message._id} style={{ width: '97%' }}>\r\n            {(!sameDay || index === 0) && (\r\n              <DateSeparator \r\n                date={convertDateToHumanReadable(new Date(message.date), 'dd/mm/yy')}\r\n              />\r\n            )\r\n\r\n            }\r\n            <Message \r\n              key={message._id}\r\n              content={message.content}\r\n              username={message.author.username}\r\n              sameAuthor={sameAuthor}\r\n              date={convertDateToHumanReadable(\r\n                new Date(message.date), \r\n                'dd/mm/yy'\r\n              )}\r\n              sameDay={sameDay}\r\n            />\r\n          </div> \r\n        );\r\n      })}\r\n      <div ref={messageEndRef} />\r\n    </MainContainer>\r\n  )\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Messages);","import React, { useState } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport { connect } from 'react-redux';\r\nimport { sendDirectMessage } from '../../realtimeCommunication/socketConnection';\r\n\r\nconst MainContainer = styled('div')({\r\n  height: '60px',\r\n  width: '100%',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n});\r\n\r\nconst Input = styled('input')({\r\n  backgroundColor: '#2f3136',\r\n  width: '98%',\r\n  height: '44px',\r\n  color: 'white',\r\n  border: 'none',\r\n  borderRadius: '8px',\r\n  fontSize: '14px',\r\n  padding: '0px 10px',\r\n  '&:focus': {\r\n    outline: 'none',\r\n  }\r\n});\r\n\r\nconst NewMessageInput = ({ chosenChatDetails }) => {\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleMessageValueChange = (event) => {\r\n    setMessage(event.target.value);\r\n  };\r\n\r\n  const handleKeyPressed = (event) => {\r\n    if(event.key === 'Enter') {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if( message.length > 0 ){\r\n      sendDirectMessage({\r\n        receiverUserId: chosenChatDetails.id,\r\n        content: message,\r\n      });\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <MainContainer>\r\n      <Input \r\n        placeholder={`Message @${chosenChatDetails.name}`}\r\n        value={message}\r\n        onChange={handleMessageValueChange}\r\n        onKeyDown={handleKeyPressed}\r\n      />\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(NewMessageInput);","import React, { useEffect } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport Messages from './Messages/Messages';\r\nimport NewMessageInput from './NewMessageInput';\r\nimport { getDirectChatHistory } from '../../realtimeCommunication/socketConnection';\r\n\r\nconst Wrapper = styled('div')({\r\n  flexGrow: 1,\r\n});\r\n\r\nconst MessengerContent = ({ chosenChatDetails }) => {\r\n  useEffect(() => {\r\n    getDirectChatHistory({\r\n      receiverUserId: chosenChatDetails.id,\r\n    });\r\n  }, [chosenChatDetails]);\r\n  return <Wrapper>\r\n      <Messages />\r\n      <NewMessageInput />\r\n    </Wrapper>\r\n}\r\n\r\nexport default MessengerContent;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport { connect } from 'react-redux';\r\nimport WelcomeMessage from './WelcomeMessage';\r\nimport MessengerContent from './MessengerContent';\r\n\r\nconst MainContainer = styled('div')({\r\n  flexGrow: 1,\r\n  backgroundColor: \"#36393f\",\r\n  marginTop: '48px',\r\n  display: 'flex',\r\n});\r\n\r\nconst Messenger = ({ chosenChatDetails }) => {\r\n  return (\r\n    <MainContainer>\r\n      {!chosenChatDetails ? <WelcomeMessage /> : <MessengerContent chosenChatDetails={chosenChatDetails} />}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ chat }) => {\r\n  return {\r\n    ...chat,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(Messenger);","import * as React from 'react';\r\nimport Menu from '@mui/material/Menu';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport { IconButton } from '@mui/material';\r\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\r\nimport { logout } from '../../shared/utils/auth';\r\nimport { getActions } from '../../store/actions/roomActions';\r\nimport { connect } from 'react-redux';\r\n\r\nconst BasicMenu = ({ audioOnly, setAudioOnly }) => {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const open = Boolean(anchorEl);\r\n  const handleMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleAudioOnlyChange = () => {\r\n    setAudioOnly(!audioOnly);\r\n\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <IconButton onClick={handleMenuOpen} style={{color:\"white\"}}>\r\n        <MoreVertIcon />\r\n      </IconButton>\r\n      <Menu\r\n        id=\"basic-menu\"\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleMenuClose}\r\n        MenuListProps={{\r\n          'aria-labelledby': 'basic-button',\r\n        }}\r\n      >\r\n        <MenuItem onClick={logout}>Logout</MenuItem>\r\n        <MenuItem onClick={handleAudioOnlyChange}>{audioOnly ? 'Audio only Enabled' : 'Audio only Disabled'}</MenuItem>\r\n      </Menu>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  }\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  }\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(BasicMenu);","import React from 'react';\r\nimport { Typography } from '@mui/material';\r\nimport { connect } from 'react-redux';\r\n\r\nconst ChosenOptionLabel = ({ name }) => {\r\n  return (\r\n    <Typography\r\n      sx={{fontSize: \"16px\", color:\"white\", fontWeight: \"bold\"}}\r\n    >{name ? `@ ${name}` : \"\"}</Typography>\r\n  )\r\n}\r\n\r\nconst mapStoreStateToProps = (state) => {\r\n  return {\r\n    name: state.chat.chosenChatDetails?.name,\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(ChosenOptionLabel);","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport DropdownMenu from './DropdownMenu';\r\nimport ChosenOptionLabel from './ChosenOptionLabel';\r\n\r\nconst MainContainer = styled('div')({\r\n  position: 'absolute',\r\n  right: '0',\r\n  top: '0',\r\n  height: '48px',\r\n  borderBottom: '1px solid black',\r\n  backgroundColor: '#36393f',\r\n  width: 'calc(100% - 296px)',\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'space-between',\r\n  padding: '0 15px',\r\n});\r\n\r\nconst AppBar = () => {\r\n  return (\r\n    <MainContainer>\r\n      <ChosenOptionLabel />\r\n      <DropdownMenu />\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nexport default AppBar;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport CloseFullscreenIcon from '@mui/icons-material/CloseFullscreen';\r\nimport OpenInFullIcon from '@mui/icons-material/OpenInFull';\r\n\r\nconst MainContainer = styled('div')({\r\n  position: 'absolute',\r\n  bottom: '10px',\r\n  right: '10px',\r\n});\r\n\r\nconst ResizeRoomButton = ({ isRoomMinimized, handleRoomResize }) => {\r\n  return (\r\n    <MainContainer>\r\n      <IconButton\r\n        style={{color: 'white'}}\r\n        onClick={handleRoomResize}\r\n      >\r\n        {isRoomMinimized ? <OpenInFullIcon /> : <CloseFullscreenIcon />}\r\n      </IconButton>\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nexport default ResizeRoomButton;","import React, { useRef, useEffect } from 'react';\r\nimport { styled } from '@mui/system';\r\n\r\nconst MainContainer = styled('div')({\r\n  height: \"50%\",\r\n  width: \"50%\",\r\n  backgroundColor: \"black\",\r\n  borderRadius: \"8px\",\r\n});\r\n\r\nconst VideoEl = styled('video')({\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n\r\n});\r\n\r\nconst Video = ({ stream, isLocalStream }) => {\r\n  const videoRef = useRef();\r\n\r\n  useEffect(()=> {\r\n    const video = videoRef.current;\r\n    video.srcObject = stream;\r\n\r\n    video.onloadedmetadata = () => {\r\n      video.play();\r\n    };\r\n  }, [stream]);\r\n\r\n  return (\r\n    <MainContainer>\r\n      <VideoEl ref={videoRef} autoPlay muted={isLocalStream?true:false} />\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nexport default Video;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport { connect } from 'react-redux';\r\nimport Video from './Video';\r\n\r\nconst MainContainer = styled('div')({\r\n  width: \"100%\",\r\n  height: \"85%\",\r\n  display: \"flex\",\r\n  flexWrap: \"wrap\",\r\n});\r\n\r\nconst VideosContainer = ({ localStream, remoteStreams, screenSharingStream }) => {\r\n  console.log(screenSharingStream);\r\n  return (\r\n    <MainContainer>\r\n      <Video stream={screenSharingStream ? screenSharingStream: localStream} isLocalStream />\r\n      { remoteStreams.map(stream => <Video \r\n        stream={stream}\r\n        key={stream.id}\r\n      />)}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  }\r\n};\r\n\r\nexport default connect(mapStoreStateToProps)(VideosContainer);","import React, { useState } from 'react';\r\nimport { IconButton } from '@mui/material';\r\nimport VideocamIcon from '@mui/icons-material/Videocam';\r\nimport VideocamOffIcon from '@mui/icons-material/VideocamOff';\r\n\r\nconst CameraButton = ({ localStream }) => {\r\n  const [cameraEnabled, setCameraEnabled] = useState(true);\r\n\r\n  const handleToggleCamera = () => {\r\n    localStream.getVideoTracks()[0].enabled = !cameraEnabled;\r\n    setCameraEnabled(!cameraEnabled);\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleToggleCamera} style={{color: 'white'}}>\r\n      {cameraEnabled ? <VideocamIcon /> : <VideocamOffIcon />}\r\n    </IconButton>\r\n  )\r\n}\r\n\r\nexport default CameraButton;","import React, { useState } from 'react';\r\nimport { IconButton } from '@mui/material';\r\nimport MicIcon from '@mui/icons-material/Mic';\r\nimport MicOffIcon from '@mui/icons-material/MicOff';\r\n\r\nconst MicButton = ({ localStream }) => {\r\n  const [micEnabled, setMicEnabled] = useState(true);\r\n\r\n  const handleToggleMic = () => {\r\n    localStream.getAudioTracks()[0].enabled = !micEnabled;\r\n    setMicEnabled(!micEnabled);\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleToggleMic} style={{color: 'white'}}>\r\n      {micEnabled ? <MicIcon /> : <MicOffIcon />}\r\n    </IconButton>\r\n  )\r\n}\r\n\r\nexport default MicButton;","import React from 'react';\r\nimport { IconButton } from '@mui/material';\r\nimport ScreenShareIcon from '@mui/icons-material/ScreenShare';\r\nimport StopScreenShareIcon from '@mui/icons-material/StopScreenShare';\r\nimport * as webRTCHandler from '../../../realtimeCommunication/webRTCHandler';\r\n\r\nconst constraints = {\r\n  audio: false,\r\n  video: true,\r\n};\r\n\r\nconst ScreenShareButton = ({\r\n  localStream,\r\n  screenSharingStream,\r\n  setScreenSharingStream,\r\n  isScreenSharingActive,\r\n}) => {\r\n\r\n\r\n  const handleScreenShareToggle = async () => {\r\n    if (!isScreenSharingActive) {\r\n      let stream = null;\r\n      try {\r\n        stream = await navigator.mediaDevices.getDisplayMedia(constraints);\r\n      } catch (err) {\r\n        console.log('Cannot get access to screen share');\r\n        console.log(err);\r\n      }\r\n\r\n      if (stream) {\r\n        setScreenSharingStream(stream);\r\n        webRTCHandler.switchOutgoingTracks(stream);\r\n      }\r\n    } else {\r\n      webRTCHandler.switchOutgoingTracks(localStream);\r\n      screenSharingStream.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n      setScreenSharingStream(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleScreenShareToggle} style={{color: 'white'}}>\r\n      {isScreenSharingActive ? <StopScreenShareIcon /> : <ScreenShareIcon />}\r\n    </IconButton>\r\n  )\r\n}\r\n\r\nexport default ScreenShareButton;","import React from 'react';\r\nimport { IconButton } from '@mui/material';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport * as roomHandler from '../../../realtimeCommunication/roomHandler';\r\n\r\nconst CloseRoomButton = () => {\r\n  const handleLeaveRoom = () => {\r\n    roomHandler.leaveRoom();\r\n  };\r\n\r\n  return (\r\n    <IconButton onClick={handleLeaveRoom} style={{color: 'white'}}>\r\n      <CloseIcon />\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default CloseRoomButton;","import React from 'react';\r\nimport { styled } from '@mui/system';\r\nimport CameraButton from './CameraButton';\r\nimport MicButton from './MicButton';\r\nimport ScreenShareButton from './ScreenShareButton';\r\nimport CloseRoomButton from './CloseRoomButton';\r\nimport { connect } from 'react-redux';\r\nimport { getActions } from '../../../store/actions/roomActions';\r\n\r\n\r\nconst MainContainer = styled('div')({\r\n  height: \"15%\",\r\n  width: \"100%\",\r\n  backgroundColor: \"#5865f2\",\r\n  borderTopLeftRadius: \"8px\",\r\n  borderTopRightRadius: \"8px\",\r\n  display: \"flex\",\r\n  alignItems: \"center\",\r\n  justifyContent: \"center\",\r\n});\r\n\r\nconst RoomButtons = (props) => {\r\n  const { localStream, isUserJoinedWithOnlyAudio } = props;\r\n  return (\r\n    <MainContainer>\r\n      {!isUserJoinedWithOnlyAudio && <ScreenShareButton {...props}/>}\r\n      <MicButton localStream={localStream}/>\r\n      <CloseRoomButton />\r\n      {!isUserJoinedWithOnlyAudio && <CameraButton localStream={localStream}/>}\r\n    </MainContainer>\r\n  );\r\n};\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  }\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  }\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(RoomButtons);","import React, { useState } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport ResizeRoomButton from './ResizeRoomButton';\r\nimport VideosContainer from './VideosContainer';\r\nimport RoomButtons from './RoomButtons/RoomButtons';\r\n\r\nconst MainContainer = styled('div')({\r\n  position: 'absolute',\r\n  borderRadius: '8px',\r\n  display: 'flex',\r\n  flexDirection: 'column',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  backgroundColor: '#202225',\r\n});\r\n\r\nconst fullScreenRoomStyle = {\r\n  width: '100%',\r\n  height: '100vh',\r\n};\r\n\r\nconst minimizedRoomStyle = {\r\n  width: '30%',\r\n  height: '40vh',\r\n  right: '0px',\r\n  bottom: '0px',\r\n};\r\n\r\nconst Room = () => {\r\n  const [isRoomMinimized, setIsRoomMinimized] = useState(true);\r\n\r\n  const roomResizeHandler = () => {\r\n    setIsRoomMinimized(!isRoomMinimized);\r\n  };\r\n\r\n  return (\r\n    <MainContainer\r\n      style={isRoomMinimized ? minimizedRoomStyle : fullScreenRoomStyle}\r\n    >\r\n      <VideosContainer />\r\n      <RoomButtons />\r\n      <ResizeRoomButton\r\n        isRoomMinimized={isRoomMinimized}\r\n        handleRoomResize={roomResizeHandler}\r\n      />\r\n    </MainContainer>\r\n  )\r\n}\r\n\r\nexport default Room;","import React, { useEffect } from 'react';\r\nimport { styled } from '@mui/system';\r\nimport SideBar from './SideBar/SideBar';\r\nimport FriendsSideBar from './FriendsSideBar/FriendsSideBar';\r\nimport Messenger from './Messenger/Messenger';\r\nimport AppBar from './AppBar/AppBar';\r\nimport { logout } from '../shared/utils/auth';\r\nimport { connect } from 'react-redux';\r\nimport { getActions } from '../store/actions/authActions';\r\nimport { connectWithSocketServer } from '../realtimeCommunication/socketConnection';\r\nimport Room from './Room/Room';\r\n\r\n\r\nconst Wrapper = styled('div')({\r\n  width: '100%',\r\n  height: '100vh',\r\n  display: 'flex',\r\n});\r\n\r\nconst Dashboard = ({ setUserDetails, isUserInRoom }) => {\r\n\r\n  useEffect(()=> {\r\n    const userDetails = localStorage.getItem('user');\r\n    if(!userDetails) {\r\n      logout();\r\n    } else {\r\n      setUserDetails(JSON.parse(userDetails));\r\n      connectWithSocketServer(JSON.parse(userDetails));\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <Wrapper>\r\n      <SideBar />\r\n      <FriendsSideBar />\r\n      <Messenger />\r\n      <AppBar />\r\n      {isUserInRoom && <Room />}\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nconst mapStoreStateToProps = ({ room }) => {\r\n  return {\r\n    ...room,\r\n  }\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  };\r\n};\r\n\r\nexport default connect(mapStoreStateToProps, mapActionsToProps)(Dashboard);","import React from 'react';\r\nimport Alert from '@mui/material/Alert';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport { connect } from 'react-redux';\r\nimport { getActions } from '../../store/actions/alertActions';\r\n\r\nconst AlertNotification = ({\r\n  showAlertMessage,\r\n  alertMessageContent,\r\n  closeAlertMessage,\r\n}) => {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{vertical:'bottom', horizontal:'center'}}\r\n      open={showAlertMessage}\r\n      onClose={closeAlertMessage}\r\n      autoHideDuration={6000}\r\n    >\r\n      <Alert severity='info'>{alertMessageContent}</Alert>\r\n    </Snackbar>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({ alert }) => {\r\n  return {\r\n    ...alert,\r\n  };\r\n};\r\n\r\nconst mapActionsToProps = (dispatch) => {\r\n  return {\r\n    ...getActions(dispatch),\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapActionsToProps)(AlertNotification);","import React from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Redirect} from 'react-router-dom';\nimport \"./App.css\";\n\nimport LoginPage from './authPages/LoginPage/LoginPage';\nimport RegisterPage from './authPages/RegisterPage/RegisterPage';\nimport Dashboard from './Dashboard/Dashboard';\nimport AlertNotification from \"./shared/components/AlertNotification\";\n\nfunction App() {\n  return <>\n    <Router>\n      <Switch>\n        <Route exact path=\"/login\">\n          <LoginPage />\n        </Route>\n        <Route exact path=\"/register\">\n          <RegisterPage />\n        </Route>\n        <Route exact path=\"/dashboard\">\n          <Dashboard />\n        </Route>\n        <Route exact path=\"/\">\n          <Redirect to=\"/dashboard\" />\n        </Route>\n      </Switch>\n    </Router>  \n    <AlertNotification />\n  </>;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport store from './store/store';\nimport {Provider} from 'react-redux';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}